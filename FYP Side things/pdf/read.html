<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Information</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.js"></script>
</head>
<body>
    <h1 id="patientID"></h1>

    <table border="1">
        <thead>
            <tr>
                <th>Question</th>
                <th>Percentage Happiness</th>
                <th>Percentage Sadness</th>
                <th>Percentage Anger</th>
                <th>Percentage Fear</th>
                <th>Percentage Neutral</th>
                <th>Positive Sentiment</th>
                <th>Negative Sentiment</th>
                <th>Average Heart Rate</th>
                <th>Average Oxygen Level</th>
            </tr>
        </thead>
        <tbody id="questionsBody"></tbody>
        
    </table>

    <script>
        // Function to fetch and display data from JSON
        function displayPatientData() {
            // Fetch the JSON data
            fetch('question.json')
                .then(response => response.json())
                .then(data => {
                    const patientID = data[0].patientID;
                    const questions = data[0].questions;

                    // Display the patient ID at the top
                    document.getElementById('patientID').innerHTML = `Patient ID: ${patientID}`;

                    // Create HTML content for the table body
                    const tableBodyContent = questions.map(question => `
                        <tr>
                            <td>${question.question}</td>
                            <td>${question.percentageHappiness}%</td>
                            <td>${question.percentageSadness}%</td>
                            <td>${question.percentageAnger}%</td>
                            <td>${question.percentageFear}%</td>
                            <td>${question.percentageNeutral}%</td>
                            <td>${question.positiveSentiment}%</td>
                            <td>${question.negativeSentiment}%</td>
                            <td>${question.avgHeartRate}</td>
                            <td>${question.avgOxygenLevel}</td>
                        </tr>
                    `).join('');

                    // Display the HTML content in the table body
                    document.getElementById('questionsBody').innerHTML = tableBodyContent;
                })
                .catch(error => console.error('Error fetching data:', error));
        }

        // Call the function to display patient data
        displayPatientData();

        
        function generatePDF() {
            // Get the HTML content
            const content = document.getElementById('questionsBody');

            // Use html2pdf to generate PDF
            html2pdf(content)
                .from(content)
                .save('patientData.pdf');
        }

    </script>
    <button onclick="generatePDF()">Download PDF</button>
</body>
</html>
